{"componentChunkName":"component---src-templates-blog-content-js","path":"/posts/frontend/rpc","result":{"data":{"markdownRemark":{"html":"<h3>Remote Procedure Call</h3>\n<p>RPC is the earliest, simplest form of API interaction. It is about executing a block of code on another server, and when implemented in HTTP or AMQP it can become a Web API.</p>\n<p>RPC is just a bunch of functions, but in the context of an HTTP API, that entails putting the method in the URL and the arguments in the query string or body.</p>\n<p>RPC is merely a concept, but that concept has a lot of specifications, all of which have concrete implementations:</p>\n<ul>\n<li>XML-RPC</li>\n<li>JSON-RPC</li>\n<li>Simple Object Access Protocol (SOAP)</li>\n</ul>\n<p>XML-RPC was problematic, because <strong>ensuring data types of XML payloads is tough</strong>. In XML, a lot of things are just strings, which JSON does improve, but has <strong>trouble differentiating different data formats like integers and decimals</strong>.</p>\n<p>A modern RPC implementation is gRPC. It uses a data format called ProtoBuff, which requires a schema as well as the data instance, much like the WSDL in SOAP. GRPC focuses on making single interactions as quick as possible, thanks to HTTP/2, and the fact that Protobuff packs down smaller than JSON, but JSON can also be used easily enough.</p>\n<h3>Representational State Transfer</h3>\n<p>REST is all about a client-server relationship, where server-side data are made available through representations of data in simple formats. This format is usually JSON or XML but could be anything.</p>\n<p>REST provided all of the relevant information with the response, and the client was able to pick through the options to resolve the situation.</p>\n<p>That said, there are two large popular specifications which provide a whole lot of standardization for REST APIs</p>\n<ul>\n<li>OData</li>\n<li>JSON-API</li>\n</ul>\n<hr>\n<p>REST is all about a client-server relationship, where server-side data are made available through representations of data in simple formats, often JSON and XML.\nHypermedia is fundamental to REST, and is essentially just the concept of providing links to other resources.</p>\n<p>Beyond hypermedia there are a few other constraints, such as:</p>\n<ul>\n<li>REST must be stateless: not persisting sessions between requests.</li>\n<li>Responses should declare cacheablility: helps your API scale if clients respect the rules.</li>\n<li>REST focuses on uniformity: if you’re using HTTP you should utilize HTTP features whenever possible, instead of inventing conventions.</li>\n</ul>\n<p>Before REST became popular, most APIs were built using an XML-RPC or SOAP</p>\n<h3>Example</h3>\n<p>If you search “SOAP example” on Google, you’ll find an example from Google that demonstrates a method named getAdUnitsByStatement, which looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soapenv:</span>Envelope</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>soapenv</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.xmlsoap.org/soap/envelope/<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsd</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soapenv:</span>Header</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">ns1:</span>RequestHeader</span>\n         <span class=\"token attr-name\"><span class=\"token namespace\">soapenv:</span>actor</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.xmlsoap.org/soap/actor/next<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\"><span class=\"token namespace\">soapenv:</span>mustUnderstand</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>ns1</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://www.google.com/apis/ads/publisher/v201605<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">ns1:</span>networkCode</span><span class=\"token punctuation\">></span></span>123456<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">ns1:</span>networkCode</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">ns1:</span>applicationName</span><span class=\"token punctuation\">></span></span>DfpApi-Java-2.1.0-dfp_test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">ns1:</span>applicationName</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">ns1:</span>RequestHeader</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">soapenv:</span>Header</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">soapenv:</span>Body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>getAdUnitsByStatement</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://www.google.com/apis/ads/publisher/v201605<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>filterStatement</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>query</span><span class=\"token punctuation\">></span></span>WHERE parentId IS NULL LIMIT 500<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>query</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>filterStatement</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>getAdUnitsByStatement</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">soapenv:</span>Body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">soapenv:</span>Envelope</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>This is a huge payload, all there simply to wrap this argument:</p>\n<p><code class=\"language-text\">&lt;query&gt;WHERE parentId IS NULL LIMIT 500&lt;/query&gt;</code></p>\n<p>In JavaScript, that would look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/* Signature */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getAdUnitsByStatement</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">filterStatement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* Usage */</span>\n<span class=\"token function\">getAdUnitsByStatement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WHERE parentId IS NULL LIMIT 500'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In a simpler JSON API, it might look more like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST /getAdUnitsByStatement HTTP/1.1\nHOST: api.example.com\nContent-Type: application/json\n\n{&quot;filter&quot;: &quot;WHERE parentId IS NULL LIMIT 500&quot;}</code></pre></div>\n<h3>What are they for</h3>\n<ul>\n<li>RPC-based APIs are great for actions.</li>\n<li>REST-based APIs are great for modeling your domain (that is, resources or entities), making CRUD (create, read, update, delete) available for all of your data.</li>\n</ul>\n<p>REST is not only CRUD, but things are done through mainly CRUD-based operations. REST will use HTTP methods such as GET, POST, PUT, DELETE, OPTIONS and, hopefully, PATCH to provide semantic meaning for the intention of the action being taken.</p>\n<p>RPC, however, would not do that. Most use only GET and POST, with GET being used to fetch information and POST being used for everything else.</p>\n<p>For example, if you want to “Send a message” to a user, RPC would be this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST /SendUserMessage HTTP/1.1\nHost: api.example.com\nContent-Type: application/json\n\n{&quot;userId&quot;: 501, &quot;message&quot;: &quot;Hello!&quot;}</code></pre></div>\n<p>But in REST, the same action would be this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">POST /users/501/messages HTTP/1.1\nHost: api.example.com\nContent-Type: application/json\n\n{&quot;message&quot;: &quot;Hello!&quot;}</code></pre></div>\n<p>There’s quite a conceptual difference here, even if they look rather similar:</p>\n<ul>\n<li>RPC. We are sending a message, and that might end up storing something in the database to keep a history, which might be another RPC call with possibly the same field names — who knows?</li>\n<li>REST. We are creating a message resource in the user’s messages collection. We can see a history of these easily by doing a GET on the same URL, and the message will be sent in the background.</li>\n</ul>\n<p>If an API is mostly actions, maybe it should be RPC.\nIf an API is mostly CRUD and is manipulating related data, maybe it should be REST.</p>","frontmatter":{"date":"October 10, 2019","path":"rpc","category":"frontend","title":"RPC"}}},"pageContext":{"location":"rpc","category":"frontend"}},"staticQueryHashes":[]}